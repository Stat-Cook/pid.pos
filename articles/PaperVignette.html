<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>PID.POS: An R package for the detection of personally identifiable data • pid.pos</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="PID.POS: An R package for the detection of personally identifiable data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pid.pos</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/PaperVignette.html">PID.POS: An R package for the detection of personally identifiable data</a></li>
    <li><a class="dropdown-item" href="../articles/udpipe-model.html">Trouble shooting the UDpipe Model</a></li>
    <li><a class="dropdown-item" href="../articles/FolderReport.html">Reporting on every file in a folder</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>PID.POS: An R package for the detection of personally identifiable data</h1>
            
      

      <div class="d-none name"><code>PaperVignette.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>The <code>PID.POS</code> package is designed to aid with the
identification of personal identifiability risks in data sets. By
applying existing natural language processing techniques, the package is
able to identify proper nouns within a data set. The extraction of
proper nouns reduced the complexity of the data, allowing for a quicker
review and oversight of the data. The package also includes a basic tool
for the design, and implementation of a redaction process.</p>
</div>
<div class="section level2">
<h2 id="statement-of-need">Statement of need<a class="anchor" aria-label="anchor" href="#statement-of-need"></a>
</h2>
<p>The world is embedded in a data revolution. Never before have we had
the depth or breadth of data being captured and analysed than we do at
present, and this is only set to increase. In response, international
bodies are taking steps to ensure legal protection of an individual’s
rights to their own data <span class="citation">(European Parliament and
Council of the European Union 2016)</span>. One effect of increase
legislation has been a growing awareness of the role and responsibility
of data controllers <span class="citation">(ICO, n.d.b)</span> and the
risks of big data <span class="citation">(Clarke 2016)</span>. Among
these concerns, a risk of ‘personal identifiability’ i.e. the ability to
directly or indirectly identify an individual from a dataset <span class="citation">(Finck and Pallas 2020)</span>, is paramount and, if
breeched, can lead to reputation damage and fines <span class="citation">(ICO, n.d.a)</span>.</p>
<p>Where data is structured and comprises only a few hundred
observations, a manual inspection can identify variables which contain
directly personally identifiable data (PID) with a reasonable time
investment. However, in the case of modern large data sets which may
comprise millions of observations, a manual inspection may miss PID if
it is embedded within a passage of text, or is a rarity for the given
variable. The <code>PID.POS</code> (Personal Identifiability Detection
by Part Of Speech tagging) package is designed to aid with the
identification of PID risks in data sets. In comparison to existing
packages which rely on a curated list of common names and
string-matching, <code>PID.POS</code> builds on the existing
<code>udpipe</code> framework, extracting all examples of proper nouns
and providing a mechanism for the review and redaction of PID risks.</p>
</div>
<div class="section level2">
<h2 id="comparison-to-existing-r-packages">Comparison to existing R packages<a class="anchor" aria-label="anchor" href="#comparison-to-existing-r-packages"></a>
</h2>
<p>The need to review data sets to identify risks is not new, and there
are a number of packages which have been developed to aid in this
process. The most notable of these are the <code>PII</code> package
<span class="citation">(Patterson-Stein 2025)</span>, which is designed
to identify personally identifiable features via pattern matching. These
approaches can be effective in identifying PID, but have a risk of
missing edge cases e.g. relying on sentence case to identify names. The
approach taken in <code>PID.POS</code> conversely takes the approach of
purposefully extracting all proper-nouns, and hence increase the false
positive rate, with the intention of supplying a simplified extract to
aid human interpretation rather than fully automate it.</p>
</div>
<div class="section level2">
<h2 id="in-practice">In practice<a class="anchor" aria-label="anchor" href="#in-practice"></a>
</h2>
<p>To install the current version of <code>PID.POS</code> package, use
the following code:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="st">"Stat-Cook/PID.POS"</span><span class="op">)</span></span></code></pre></div>
<p>To assist with understanding the <code>PID.POS</code> package, we
include a subset of the ‘friends’ data set from the <code>friends</code>
package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stat-cook.github.io/pid.pos/">pid.pos</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">the_one_in_massapequa</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 257</span></span>
<span><span class="co">## Columns: 4</span></span>
<span><span class="co">## $ scene     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ utterance <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>6<span style="color: #949494;">, </span>7<span style="color: #949494;">, </span>8<span style="color: #949494;">, </span>9<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>11<span style="color: #949494;">, </span>12<span style="color: #949494;">, </span>13<span style="color: #949494;">, </span>14<span style="color: #949494;">, </span>15<span style="color: #949494;">, </span>16<span style="color: #949494;">, </span>17<span style="color: #949494;">, </span>1…</span></span>
<span><span class="co">## $ speaker   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Scene Directions"<span style="color: #949494;">, </span>"Phoebe Buffay"<span style="color: #949494;">, </span>"Monica Geller"<span style="color: #949494;">, </span>"Ross …</span></span>
<span><span class="co">## $ text      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "[Scene: Central Perk, everyone is there.]"<span style="color: #949494;">, </span>"Oh, Ross, Mon,…</span></span></code></pre>
<p>The package has two main functions for identifying PID risks,
depending on the users needs.<br>
First, the <code>data_frame_report</code> function converts a typical R
data frame into a new data frame of:</p>
<ul>
<li>
<code>Sentence</code> - the sentence containing proper nouns</li>
<li>
<code>Token</code> - the specific proper noun token</li>
<li>
<code>Repeats</code> - the number of times the sentence occurs in
the data set</li>
<li>
<code>Affected Columns</code> - the columns in the original data
frame which contain the sentence</li>
<li>
<code>ID</code> - the column and row where the sentence first
appears</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">report</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/data_frame_report.html">data_frame_report</a></span><span class="op">(</span><span class="va">the_one_in_massapequa</span><span class="op">)</span></span>
<span><span class="va">report</span></span></code></pre></div>
<p>The second function is <code>report_on_folder</code> which iterates
over a folder of data files, producing a proper noun report for each. It
is foreseen that this function will be the more useful, used just before
data release to evidence no PID risks.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/report_on_folder.html">report_on_folder</a></span><span class="op">(</span><span class="st">'path/to/data/'</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/browse_model_location.html">browse_model_location</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>NB: the <code>data_frame_report</code> and
<code>report_on_folder</code> functions automate the download of the
pre-trained <code>udpipe</code> model. These models are required to be
cached to the users hard-drive and hence firewall issues may present.
The vignette … is included to help with common issues.</p>
<p>While being able to identify PID risks is the core premise of this
package, it would be remiss to not supply some tools to aid in the
removal of PID. Hence, we supply<br>
basic functionality designed for minimal technical knowledge to assist
in the redaction of PID.</p>
<p>Where a PID report has been ran, the resulting data frame can be
passed to the function <code>report_as_rules_template</code> which will
convert the report to a csv file with three headings:</p>
<ul>
<li>
<code>If</code> - the sentence pattern which, if it matches, the
replacement is applied</li>
<li>
<code>From</code> - the pattern to be replaced</li>
<li>
<code>To</code> - the intended replacement</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/report_as_rules_template.html">report_as_rules_template</a></span><span class="op">(</span><span class="va">report</span>, path<span class="op">=</span><span class="st">'path/to/report.csv'</span><span class="op">)</span></span></code></pre></div>
<p>The csv file is intended to be edited by the data controller, who
hence does not need to understand R, and can be reimported using the
<code>template_to_rules</code> function:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/template_to_rules.html">template_to_rules</a></span><span class="op">(</span><span class="st">'path/to/report.csv'</span><span class="op">)</span></span></code></pre></div>
<p>The <code>template_to_rules</code> function creates a string
replacement rule to capture the desired redactions, with the option for
R to ‘parse’ the function for use as part of a data pipeline:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">replacement.func</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/template_to_rules.html">template_to_rules</a></span><span class="op">(</span><span class="st">'path/to/report.csv'</span>, parse<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span></span>
<span><span class="va">the_one_in_massapequa</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html" class="external-link">where</a></span><span class="op">(</span><span class="va">is.character</span><span class="op">)</span>,</span>
<span>      <span class="va">replacement.func</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>For a more advanced user, the <code>template_to_rules</code> function
utilizes the <code>str_detect</code> and <code>str_replace_all</code>
functions from the <code>stringr</code> package, and hence supports
regex.</p>
</div>
<div class="section level2">
<h2 id="current-applications">Current applications<a class="anchor" aria-label="anchor" href="#current-applications"></a>
</h2>
<p>The <code>PID.POS</code> package was developed for applications in
the NuRS and AmReS research projects which aim to extract and analyse
retrospective operational data from NHS Trusts to understand staff
retention and patient safety.</p>
</div>
<div class="section level2">
<h2 id="contributions">Contributions<a class="anchor" aria-label="anchor" href="#contributions"></a>
</h2>
<p>The package was designed by RC and …. Implementation was done by RC.
Quality assurance was done by … Documentation was written by RC….
Funding for the work was won by RC and SJ.</p>
</div>
<div class="section level2">
<h2 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a>
</h2>
<p>The development of <code>PID.POS</code> was part of the NuRS and
AmReS projects funded by the Health Foundation.</p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-clarke2016big" class="csl-entry">
Clarke, Roger. 2016. <span>“Big Data, Big Risks.”</span> <em>Information
Systems Journal</em> 26 (1): 77–90.
</div>
<div id="ref-GDPR" class="csl-entry">
European Parliament, and Council of the European Union. 2016.
<span>“Regulation (EU) 2016/679 of the European Parliament and of the
Council.”</span> April 27, 2016. <a href="https://data.europa.eu/eli/reg/2016/679/oj" class="external-link">https://data.europa.eu/eli/reg/2016/679/oj</a>.
</div>
<div id="ref-finck2020they" class="csl-entry">
Finck, Michèle, and Frank Pallas. 2020. <span>“They Who Must Not Be
Identified—Distinguishing Personal from Non-Personal Data Under the
GDPR.”</span> <em>International Data Privacy Law</em> 10 (1): 11–36.
</div>
<div id="ref-ICOWhatIf" class="csl-entry">
ICO. n.d.a. <span>“Personal Data Breaches: What Happens If We Fail to
Notify the ICO of All Notifiable Breaches?”</span> <a href="https://ico.org.uk/for-organisations/report-a-breach/personal-data-breach/personal-data-breaches-a-guide/#whathappensi" class="external-link">https://ico.org.uk/for-organisations/report-a-breach/personal-data-breach/personal-data-breaches-a-guide/#whathappensi</a>.
</div>
<div id="ref-ICODataController" class="csl-entry">
———. n.d.b. <span>“What Does It Mean If You Are a Controller?”</span> <a href="https://ico.org.uk/for-organisations/uk-gdpr-guidance-and-resources/controllers-and-processors/controllers-and-processors/what-does-it-mean-if-you-are-a-controller/" class="external-link">https://ico.org.uk/for-organisations/uk-gdpr-guidance-and-resources/controllers-and-processors/controllers-and-processors/what-does-it-mean-if-you-are-a-controller/</a>.
</div>
<div id="ref-pii" class="csl-entry">
Patterson-Stein, Jacob. 2025. <em>Pii: Search Data Frames for Personally
Identifiable Information</em>. <a href="https://CRAN.R-project.org/package=pii" class="external-link">https://CRAN.R-project.org/package=pii</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Cook.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
